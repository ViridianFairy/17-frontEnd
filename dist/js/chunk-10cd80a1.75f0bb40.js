(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10cd80a1"],{1276:function(t,e,i){"use strict";var n=i("d784"),a=i("44e7"),s=i("825a"),o=i("1d80"),r=i("4840"),l=i("8aa5"),c=i("50c4"),h=i("14c3"),d=i("9263"),u=i("d039"),p=[].push,g=Math.min,f=4294967295,m=!u((function(){return!RegExp(f,"y")}));n("split",2,(function(t,e,i){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var n=String(o(this)),s=void 0===i?f:i>>>0;if(0===s)return[];if(void 0===t)return[n];if(!a(t))return e.call(n,t,s);var r,l,c,h=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,m=new RegExp(t.source,u+"g");while(r=d.call(m,n)){if(l=m.lastIndex,l>g&&(h.push(n.slice(g,r.index)),r.length>1&&r.index<n.length&&p.apply(h,r.slice(1)),c=r[0].length,g=l,h.length>=s))break;m.lastIndex===r.index&&m.lastIndex++}return g===n.length?!c&&m.test("")||h.push(""):h.push(n.slice(g)),h.length>s?h.slice(0,s):h}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:e.call(this,t,i)}:e,[function(e,i){var a=o(this),s=void 0==e?void 0:e[t];return void 0!==s?s.call(e,a,i):n.call(String(a),e,i)},function(t,a){var o=i(n,t,this,a,n!==e);if(o.done)return o.value;var d=s(t),u=String(this),p=r(d,RegExp),v=d.unicode,x=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(m?"y":"g"),y=new p(m?d:"^(?:"+d.source+")",x),b=void 0===a?f:a>>>0;if(0===b)return[];if(0===u.length)return null===h(y,u)?[u]:[];var S=0,k=0,_=[];while(k<u.length){y.lastIndex=m?k:0;var w,C=h(y,m?u:u.slice(k));if(null===C||(w=g(c(y.lastIndex+(m?0:k)),u.length))===S)k=l(u,k,v);else{if(_.push(u.slice(S,k)),_.length===b)return _;for(var D=1;D<=C.length-1;D++)if(_.push(C[D]),_.length===b)return _;k=S=w}}return _.push(u.slice(S)),_}]}),!m)},"44e7":function(t,e,i){var n=i("861d"),a=i("c6b6"),s=i("b622"),o=s("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==a(t))}},"54d8":function(t,e,i){"use strict";var n=i("b482"),a=i.n(n);a.a},"93b7":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"wrapper"}},[i("div",{attrs:{id:"more"}},[i("a-button",{attrs:{block:"",size:"large"},on:{click:t.showModal}},[t._v(" 添加日程 ")]),i("a-modal",{attrs:{title:"添加日程",visible:t.visible,"confirm-loading":t.confirmLoading,okText:"保存",cancelText:"取消"},on:{ok:t.handleOk,cancel:t.handleCancel}},[i("div",{attrs:{id:"fl"}},[i("div",{attrs:{id:"iconleft"}},[i("a-icon",{staticStyle:{fontSize:"22px",color:"gray",margin:"15px"},attrs:{type:"edit"}}),i("a-icon",{staticStyle:{fontSize:"22px",color:"gray",margin:"15px"},attrs:{type:"calendar"}}),i("a-icon",{staticStyle:{fontSize:"22px",color:"gray",margin:"15px"},attrs:{type:"clock-circle"}}),i("a-icon",{staticStyle:{fontSize:"22px",color:"gray",margin:"15px"},attrs:{type:"pushpin"}}),i("a-icon",{staticStyle:{fontSize:"22px",color:"gray",margin:"15px"},attrs:{type:"tag"}})],1),i("div",{attrs:{id:"contentright"}},[i("a-input",{staticStyle:{width:"400px"},attrs:{placeholder:"填写日程内容",autoSize:"",allowClear:""},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),i("a-date-picker",{staticStyle:{"margin-top":"20px",width:"400px"},attrs:{placeholder:"请选择日期"},on:{change:t.onChange}}),i("a-date-picker",{staticStyle:{"margin-top":"20px",width:"400px"},attrs:{placeholder:"请选择提醒时间"},on:{change:t.onChange2}}),i("p"),i("p"),i("a-input",{staticStyle:{"margin-top":"30px",width:"400px"},attrs:{placeholder:"填写备注",autoSize:"",allowClear:""},model:{value:t.remarks,callback:function(e){t.remarks=e},expression:"remarks"}}),i("p"),i("div",{staticClass:"tags1"},[i("div",[t._l(t.tags,(function(e,n){return[e.length>20?i("a-tooltip",{key:e,attrs:{title:e}},[i("a-tag",{key:e,attrs:{closable:0!==n},on:{close:function(){return t.handleClose(e)}}},[t._v(" "+t._s(e.slice(0,20)+"...")+" ")])],1):i("a-tag",{key:e,staticStyle:{"font-size":"15px","text-align":"center",height:"25px","margin-top":"10px"},attrs:{closable:0!==n,color:"#003366"},on:{close:function(){return t.handleClose(e)}}},[t._v(" "+t._s(e)+" ")])]})),t.inputVisible?i("a-input",{ref:"input",style:{width:"78px"},attrs:{type:"text",size:"large",value:t.inputValue},on:{change:t.handleInputChange,blur:t.handleInputConfirm,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}}}):i("a-tag",{staticStyle:{background:"#fff",height:"25px",borderStyle:"dashed"},on:{click:t.showInput}},[i("a-icon",{attrs:{type:"plus"}}),t._v(" "),i("em",{staticStyle:{"font-size":"14px","font-style":"normal",color:"gray","padding-left":"0"}},[t._v("添加标签")])],1)],2)])],1)])]),i("a-modal",{attrs:{title:"查看日程",cancelText:"取消",okText:"保存",width:"650px"},on:{ok:t.save,cancel:t.cancel},model:{value:t.showDetails,callback:function(e){t.showDetails=e},expression:"showDetails"}},[i("div",{attrs:{id:"f2"}},[i("div",{attrs:{id:"iconleft1"}},[i("a-icon",{staticStyle:{fontSize:"22px",color:"gray","vertical-align":"middle",margin:"15px","margin-bottom":"20px"},attrs:{type:"edit"}}),t._v("日程内容 "),i("a-icon",{staticStyle:{fontSize:"22px",color:"gray","vertical-align":"middle",margin:"15px","margin-bottom":"20px"},attrs:{type:"user"}}),t._v("发起人 "),i("a-icon",{staticStyle:{fontSize:"22px",color:"gray",margin:"15px","vertical-align":"middle","margin-bottom":"20px"},attrs:{type:"calendar"}}),t._v("设置时间 "),i("a-icon",{staticStyle:{fontSize:"22px",color:"gray",margin:"15px","vertical-align":"middle","margin-bottom":"16px"},attrs:{type:"clock-circle"}}),t._v("提醒时间 "),i("a-icon",{staticStyle:{fontSize:"22px",color:"gray",margin:"15px","vertical-align":"middle","margin-bottom":"16px"},attrs:{type:"pushpin"}}),t._v("备注 "),i("a-icon",{staticStyle:{fontSize:"22px",color:"gray",margin:"15px","vertical-align":"middle","margin-bottom":"20px"},attrs:{type:"tag"}}),t._v("标签 "),i("a-button",{staticStyle:{"margin-top":"20px","margin-left":"15px"},attrs:{type:"danger"},on:{click:t.scheDelete}},[t._v(" 删除日程 ")])],1),i("div",{attrs:{id:"contentright1"}},[i("a-input",{staticStyle:{width:"400px"},attrs:{placeholder:"日程内容",autoSize:"",allowClear:""},model:{value:t.scheName,callback:function(e){t.scheName=e},expression:"scheName"}}),i("a-input",{staticStyle:{"margin-top":"25px",width:"400px"},attrs:{placeholder:"发起人",disabled:""},model:{value:t.scheCreator,callback:function(e){t.scheCreator=e},expression:"scheCreator"}}),i("a-date-picker",{staticStyle:{"margin-top":"25px",width:"400px"},attrs:{value:t.moment(t.t_set)},on:{change:t.tSetChange}}),i("a-date-picker",{staticStyle:{"margin-top":"23px",width:"400px"},attrs:{value:t.moment(t.t_remind),disabled:""}}),i("p"),i("p"),i("a-input",{staticStyle:{"margin-top":"30px",width:"400px"},attrs:{placeholder:"填写备注",autoSize:"",allowClear:""},model:{value:t.scheRemarks,callback:function(e){t.scheRemarks=e},expression:"scheRemarks"}}),i("p"),i("div",{staticClass:"tags1"},[i("div",[t._l(t.scheLabel,(function(e,n){return[e.length>20?i("a-tooltip",{key:e,attrs:{title:e}},[i("a-tag",{key:e,attrs:{closable:0!==n},on:{close:function(){return t.handleClose1(e)}}},[t._v(" "+t._s(e.slice(0,20)+"...")+" ")])],1):i("a-tag",{key:e,staticStyle:{"font-size":"15px","text-align":"center",height:"25px","margin-top":"15px"},attrs:{closable:0!==n,color:"#003366"},on:{close:function(){return t.handleClose1(e)}}},[t._v(" "+t._s(e)+" ")])]})),t.inputVisible1?i("a-input",{ref:"input1",style:{width:"78px"},attrs:{type:"text",size:"large",value:t.inputValue1},on:{change:t.handleInputChange1,blur:t.handleInputConfirm1,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm1(e)}}}):i("a-tag",{staticStyle:{background:"#fff",height:"25px",borderStyle:"dashed","margin-top":"12px"},on:{click:t.showInput1}},[i("a-icon",{attrs:{type:"plus"}}),t._v(" "),i("em",{staticStyle:{"font-size":"14px","font-style":"normal",color:"gray","padding-left":"0"}},[t._v("添加标签")])],1)],2)])],1)])]),t._m(0),i("a-divider",[t._v("过去的日程")]),t._m(1),i("a-collapse",{model:{value:t.activeKey,callback:function(e){t.activeKey=e},expression:"activeKey"}},t._l(t.docByTime,(function(e,n){return i("a-collapse-panel",{key:n,attrs:{header:n}},[i("div",{staticClass:"content"},t._l(e,(function(e,n){return i("div",{key:n,staticStyle:{margin:"10px 0"}},[0!=n?i("a-divider"):t._e(),i("p",[t._v(t._s(e.time)),i("em",{on:{click:function(i){return t.scheDetails(e.id)}}},[t._v(" "+t._s(e.content)+" ")])])],1)})),0)])})),1)],1)])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[i("br"),i("br")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[i("br"),i("br")])}],s=(i("99af"),i("4de4"),i("4160"),i("c975"),i("a15b"),i("ac1f"),i("1276"),i("159b"),i("2909")),o=i("d0dd"),r=i("c1df"),l=i.n(r),c=(i("5c3a"),{name:"Schedule",components:{},computed:{getCurrentMoment:function(){return l()((new Date).toLocaleDateString(),"YYYY-MM-DD")}},data:function(){return{moment:l.a,detailsId:0,scheName:"",scheLabel:["标签"],scheLabelStr:"",scheRemarks:"",t_remind:null,t_set:null,scheCreator:"",showDetails:!1,visible:!1,confirmLoading:!1,customStyle:"background: gray;border-radius: 8px;margin-bottom: 50px;border:10;",mode1:"time",tags:["标签"],inputVisible:!1,inputVisible1:!1,inputValue:"",inputValue1:"",doc:[],activeKey:"",dateString1:"",dateString2:"",content:"",remarks:"",index1:0,setTime:"",remindTime:"",docByTime:[]}},mounted:function(){this.update()},methods:{tSetChange:function(t,e){console.log("Selected Time: ",e)},scheDelete:function(){var t=confirm("确认删除该日程吗？");t&&this.delete(this.detailsId),this.showDetails=!1},cancel:function(){this.update()},save:function(){var t=this;this.scheLabelStr="",this.scheLabelStr=this.scheLabel.join(" "),this.$http.post("/api/project/".concat(this.$store.state.project.id,"/schedule/update"),{project_id:this.$store.state.project.id,id:this.detailsId,t_set:Object(o["toDateTime"])(this.t_set),content:this.scheName,remarks:this.scheRemarks,label:this.scheLabelStr}).then((function(e){var i=e.data.status;e.data.msg;0==i?(alert("已保存！"),t.showDetails=!1,t.update()):9001==i?alert("标签长度过长，保存失败！"):alert("保存失败！")}))},scheDetails:function(t){for(var e=0;e<this.doc.length;e++)if(this.doc[e].id==t){this.index1=e,this.detailsId=t,this.scheName=this.doc[e].content,this.scheLabelStr=this.doc[e].label,this.scheLabel=this.scheLabelStr.split(" "),this.scheRemarks=this.doc[e].remarks,this.t_remind=this.doc[e].t_remind,this.t_set=this.doc[e].t_set,this.scheCreator=this.doc[e].creator.username;break}console.log("set"+this.t_set),console.log("remind"+this.t_remind),this.showDetails=!0},delete:function(t){var e=this;this.$http.post("/api/project/".concat(this.$store.state.project.id,"/schedule/delete"),{project_id:this.$store.state.project.id,id:t}).then((function(t){var i=t.data.status;t.data.msg;0==i?(alert("删除成功！"),e.update()):alert("删除失败！")}))},update:function(){var t=this;function e(t,e){if(0==t.length)return 0;for(var i in t)if(e==i)return 1;return 0}function i(t){var e=new Date(t),i=e.getMonth()+1;e.getDate();i>=1&&i<=9&&(i="0"+i);var n=e.getFullYear()+"年"+i+"月";return n}this.docByTime={},this.$http.get("/api/project/".concat(this.$store.state.project.id,"/schedule"),{project_id:this.$store.state.project.id}).then((function(n){var a=n.data.status;n.data.msg;0==a&&(t.doc=n.data.data),t.doc.forEach((function(n){var a=new Date(n.t_set);n.sortTime=i(n.t_set),a.getMonth()+1<10&&(n.time="0"+(a.getMonth()+1)+"月"+a.getDate()+"日"),a.getDate()<10?n.time="0"+(a.getMonth()+1)+"月0"+a.getDate()+"日":a.getMonth()+1>=10&&a.getDate()<=10&&(n.time=a.getMonth()+1+"月"+a.getDate()+"日"),e(t.docByTime,n.sortTime)||t.$set(t.docByTime,n.sortTime,[]),t.docByTime[n.sortTime].push(n)}))}))},onChange:function(t,e){this.dateString1=e,console.log(t,e)},onChange2:function(t,e){this.dateString2=e,console.log(t,e)},handleOpenChange1:function(t){t&&(this.mode1="time")},handlePanelChange1:function(t,e){this.mode1=e},handleClose:function(t){var e=this.tags.filter((function(e){return e!==t}));this.tags=e},handleClose1:function(t){var e=this.scheLabel.filter((function(e){return e!==t}));this.scheLabel=e,this.scheLabelStr=this.scheLabel.join(" ")},showInput:function(){this.inputVisible=!0,this.$nextTick((function(){this.$refs.input.focus()}))},showInput1:function(){this.inputVisible1=!0,this.$nextTick((function(){this.$refs.input1.focus()}))},handleInputChange:function(t){this.inputValue=t.target.value},handleInputConfirm:function(){var t=this.inputValue,e=this.tags;t&&-1===e.indexOf(t)&&(e=[].concat(Object(s["a"])(e),[t])),console.log(e),Object.assign(this,{tags:e,inputVisible:!1,inputValue:""})},handleInputChange1:function(t){this.inputValue1=t.target.value},handleInputConfirm1:function(){var t=this.inputValue1,e=this.scheLabel;t&&-1===e.indexOf(t)&&(e=[].concat(Object(s["a"])(e),[t])),Object.assign(this,{scheLabel:e,inputVisible1:!1,inputValue1:""})},showModal:function(){this.content="",this.remarks="",this.tags=["标签"],this.setTime="",this.remindTime="",this.visible=!0},handleOk:function(t){var e=this,i="";i=this.tags.join(" "),this.ModalText="The modal will be closed after two seconds",this.confirmLoading=!0,this.$http.post("/api/project/".concat(this.$store.state.project.id,"/schedule"),{project_id:this.$store.state.project.id,t_set:Object(o["toDateTime"])(this.dateString1),t_remind:Object(o["toDateTime"])(this.dateString2),label:i,content:this.content,remarks:this.remarks}).then((function(t){var i=t.data.status;t.data.msg;console.log(t),0==i&&e.update()})),setTimeout((function(){e.visible=!1,e.confirmLoading=!1}),0)},handleCancel:function(t){console.log("Clicked cancel button"),this.visible=!1}}}),h=c,d=(i("54d8"),i("2877")),u=Object(d["a"])(h,n,a,!1,null,"58f78ea6",null);e["default"]=u.exports},b482:function(t,e,i){},c975:function(t,e,i){"use strict";var n=i("23e7"),a=i("4d64").indexOf,s=i("a640"),o=i("ae40"),r=[].indexOf,l=!!r&&1/[1].indexOf(1,-0)<0,c=s("indexOf"),h=o("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:l||!c||!h},{indexOf:function(t){return l?r.apply(this,arguments)||0:a(this,t,arguments.length>1?arguments[1]:void 0)}})},d0dd:function(t,e){function i(t){var e=new Date(t),i=e.getFullYear()+"-",n=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",a=(e.getDate()<10?"0"+e.getDate():e.getDate())+" ",s=(e.getHours()<10?"0"+e.getHours():e.getHours())+":",o=(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":",r=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return strDate=i+n+a+s+o+r,strDate}function n(t){if("string"==typeof t)return t;for(var e in t)return e+" "+t[e]}url={"-1":"系统错误","-100":"参数错误","-102":"未登录","-103":"操作错误"},t.exports={url:url,toDateTime:i,getFirstMsg:n}}}]);
//# sourceMappingURL=chunk-10cd80a1.75f0bb40.js.map