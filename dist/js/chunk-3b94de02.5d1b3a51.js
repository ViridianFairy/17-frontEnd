(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b94de02"],{"1ef6":function(t,e,a){"use strict";var i=a("bfaf"),o=a.n(i);o.a},bfaf:function(t,e,a){},d3ee:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"wrapper"}},[t.isRouterAlive?a("router-view"):t._e(),a("p",{staticStyle:{"margin-left":"35px","margin-top":"25px","font-size":"25px"}},[t._v("项目成员")]),a("a-divider",{staticStyle:{"margin-top":"10px"}}),a("div",{attrs:{id:"post"}},[a("a-modal",{attrs:{title:"邀请新成员","ok-text":"确认","cancel-text":"取消"},on:{ok:t.addMemberHandleOk},model:{value:t.addMemberVisible,callback:function(e){t.addMemberVisible=e},expression:"addMemberVisible"}},[a("h3",[t._v("账号邀请")]),a("a-input",{staticStyle:{width:"400px"},attrs:{placeholder:"输入邮箱或电话或用户ID直接邀请"},model:{value:t.addText1,callback:function(e){t.addText1=e},expression:"addText1"}}),a("a-radio-group",{staticStyle:{"margin-top":"9px"},on:{change:t.onMemberChange},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},[a("a-radio",{attrs:{value:"1"}},[t._v(" 邮箱 ")]),a("a-radio",{attrs:{value:"2",disabled:""}},[t._v("手机号")]),a("a-radio",{attrs:{value:"3",disabled:""}},[t._v(" 用户ID ")])],1),a("p",{staticStyle:{"margin-top":"50px"}},[t._v("项目成员数量·"+t._s(this.memberNum))])],1),a("a-modal",{attrs:{title:"修改成员信息","ok-text":"确认","cancel-text":"取消"},on:{ok:function(e){return t.okMessage()}},model:{value:t.amendVisible,callback:function(e){t.amendVisible=e},expression:"amendVisible"}},[a("h3",[t._v("权限设置")]),a("a-radio-group",{staticStyle:{"margin-top":"9px"},on:{change:t.identityChange},model:{value:t.identityType,callback:function(e){t.identityType=e},expression:"identityType"}},[a("a-radio",{attrs:{value:"admin"}},[t._v(" 管理员 ")]),a("a-radio",{attrs:{value:"member"}},[t._v(" 成员 ")])],1),a("br"),a("br"),a("a-button",{attrs:{type:"danger"},on:{click:t.showConfirm}},[t._v(" 移除成员 ")])],1),a("p",[a("a-icon",{staticStyle:{fontSize:"35px",color:"#003366","margin-top":"25px","margin-bottom":"-5px","vertical-align":"bottom"},attrs:{type:"plus-circle",theme:"filled"},on:{click:t.showAddMemberModal}}),a("em",{staticStyle:{"font-size":"18px","font-style":"normal","padding-left":"10px"}},[t._v("邀请新成员")])],1),a("a-list",{attrs:{"item-layout":"horizontal","data-source":t.memberData},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{},[a("a-list-item-meta",["originator"==e.identity||"admin"==e.identity?a("p",{staticStyle:{"font-size":"18px",color:"gray","margin-top":"-5px"},attrs:{slot:"title"},on:{click:function(a){return t.showInfoModal(e.id)}},slot:"title"},[t._v(t._s(e.username)+" "),"originator"==e.identity?a("a-icon",{staticStyle:{color:"gold",fontSize:"22px","margin-left":"25px","vertical-align":"bottom","margin-top":"16px"},attrs:{type:"crown"}}):t._e(),"admin"==e.identity?a("a-icon",{staticStyle:{color:"#003366",fontSize:"22px","margin-left":"25px","vertical-align":"bottom","margin-top":"16px"},attrs:{type:"sketch"}}):t._e(),null!=e.location&&""!=e.location?a("em",{staticStyle:{"font-size":"17px",color:"gray","font-style":"normal","margin-left":"20px"}},[t._v(" 地址："+t._s(e.location)+" ")]):t._e(),null!=e.tel&&""!=e.tel?a("em",{staticStyle:{"font-size":"17px",color:"gray","font-style":"normal","margin-left":"20px"}},[t._v(" 电话："+t._s(e.tel)+" ")]):t._e(),null!=e.website&&""!=e.website?a("em",{staticStyle:{"font-size":"17px",color:"gray","font-style":"normal","margin-left":"20px"}},[t._v(" 个人网页："+t._s(e.website)+" ")]):t._e()],1):t._e(),"member"==e.identity?a("p",{staticStyle:{"font-size":"18px",color:"gray","margin-top":"6.5px"},attrs:{slot:"title"},on:{click:function(a){return t.showInfoModal(e.id)}},slot:"title"},[t._v(t._s(e.username)+" "),null!=e.location&&""!=e.location?a("em",{staticStyle:{"font-size":"17px",color:"gray","font-style":"normal","margin-left":"20px"}},[t._v(" 地址："+t._s(e.location)+" ")]):t._e(),null!=e.tel&&""!=e.tel?a("em",{staticStyle:{"font-size":"17px",color:"gray","font-style":"normal","margin-left":"20px"}},[t._v(" 电话："+t._s(e.tel)+" ")]):t._e(),null!=e.website&&""!=e.website?a("em",{staticStyle:{"font-size":"17px",color:"gray","font-style":"normal","margin-left":"20px"}},[t._v(" 个人网页："+t._s(e.website)+" ")]):t._e()]):t._e(),a("a-avatar",{staticStyle:{"padding-bottom":"-10px"},attrs:{slot:"avatar",src:e.photo,size:"large"},slot:"avatar"})],1),a("div",{staticStyle:{"margin-top":"-7px","margin-right":"30px","font-size":"10px"}},[a("a",["originator"==e.identity||"admin"!=t.identity&&"originator"!=t.identity?t._e():a("a-icon",{staticStyle:{fontSize:"25px",color:"gray","margin-right":"50px"},attrs:{type:"setting"},on:{click:function(a){return t.amendModal(e.identity,e.id)}}})],1)])],1)}}])})],1)],1)},o=[],n={name:"Member",components:{},data:function(){return{addMemberVisible:!1,addText1:"",value2:1,inviteVisible:!1,amendVisible:!1,allData:[],nowId:0,showInfoId:0,identity:"originator",searchWay:"phone",identityType:"admin",memberNum:0,isRouterAlive:!0,infoVisible:!1,memberData:[]}},provide:function(){return{reload:this.reload}},mounted:function(){this.getMember(),this.update()},methods:{showInfoModal:function(t){this.infoVisible=!0,this.showInfoId=t},reload:function(){this.update(),this.isRouterAlive=!1,this.$nextTick((function(){this.isRouterAlive=!0}))},showConfirm:function(){var t=this,e=confirm("确认移除该成员吗？");e&&(this.$http.post("/api/project/".concat(this.$store.state.project.id,"/user/remove"),{account_type:"id",account:this.nowId}).then((function(e){var a=e.data.status,i=e.data.msg;0==a?(t.$alert(i,"true"),t.amendVisible=!1):t.$alert(i,"false")})),this.amendVisible=!1,this.update()),this.update()},okMessage:function(){var t=this;"member"==this.identityType?this.$http.post("/api/project/".concat(this.$store.state.project.id,"/admin/remove"),{project_id:this.$store.state.project.id,id:this.nowId}).then((function(e){var a=e.data.status,i=e.data.msg;0==a?(t.amendVisible=!1,t.reload(),t.update(),t.$alert(i,"true")):t.$alert(i,"false")})):"admin"==this.identityType&&this.$http.post("/api/project/".concat(this.$store.state.project.id,"/admin/add"),{project_id:this.$store.state.project.id,id:this.nowId}).then((function(e){var a=e.data.status,i=e.data.msg;0==a?(t.amendVisible=!1,t.reload(),t.update(),t.$alert(i,"true")):t.$alert(i,"false")}))},update:function(){var t=this;this.$http.get("/api/project/".concat(this.$store.state.project.id),{project_id:this.$store.state.project.id}).then((function(e){var a=e.data.status;e.data.msg;0==a&&(t.memberData=e.data.data.member,t.$store.commit("memberUpdate",t.memberData))}))},identityChange:function(t){this.identityType=t.target.value,console.log("radio checked",t.target.value)},inviteModal:function(){this.inviteVisible=!0},amendModal:function(t,e){this.amendVisible=!0,this.nowId=e,this.identityType=t,console.log(e)},searchWayChange:function(t){console.log("radio checked",t.target.value)},getMember:function(){var t=this;this.$http.get("/api/project/".concat(this.$store.state.project.id),{params:{project_id:this.$store.state.project.id}}).then((function(e){var a=e.data.status;e.data.msg;0==a&&(e.data.data?t.allData=e.data.data:t.allData=[],e.data.data.member?(t.memberNum=e.data.data.member.length,t.memberData=e.data.data.member):t.memberData=[])})).catch((function(e){t.$alert("未知错误","false")}))},getMessage:function(){},showAddMemberModal:function(){this.value2="1",this.addMemberVisible=!0},addMemberHandleOk:function(t){var e=this,a=this.value2;"1"==a&&(a="email"),"3"==a&&(a="id"),console.log(a),this.$http.post("/api/project/".concat(this.$store.state.project.id,"/user/add"),{project_id:this.$store.state.project.id,account:this.addText1,account_type:a}).then((function(t){var a=t.data.status,i=t.data.msg;0==a?(e.$alert(i,"true"),e.addMemberVisible=!1,e.update()):e.$alert(i,"false")})),this.addMemberVisible=!1},onMemberChange:function(t){},showAddAdminModal:function(){this.value3="3",this.addAdminVisible=!0},addAdminHandleOk:function(t){var e=this,a=this.value3;"1"==a&&(a="email"),"3"==a&&(a="id"),console.log(a),this.$http.post("/api/project/".concat(this.$store.state.project.id,"/admin/add"),{project_id:this.$store.state.project.id,account:this.addText2,account_type:a}).then((function(t){var a=t.data.status,i=t.data.msg;0==a?(e.$alert(i,"true"),e.addAdminVisible=!1,e.addMemberVisible=!1,e.update()):e.$alert(i,"false")}))},onAdminChange:function(t){console.log("radio3 checked",t.target.value)}}},s=n,r=(a("1ef6"),a("2877")),l=Object(r["a"])(s,i,o,!1,null,"ba7448b2",null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-3b94de02.5d1b3a51.js.map